(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{179:function(e,t,n){"use strict";var r=n(0),a=n.n(r),l=n(180),s=n.n(l);t.a=e=>{let{content:t}=e;return a.a.createElement("div",{style:{padding:10},className:s.a.mdcontainer},a.a.createElement("code",{dangerouslySetInnerHTML:{__html:t},className:s.a.code}))}},180:function(e,t,n){e.exports={mdcontainer:"mdcontainer__3ycSEfvL"}},315:function(e,t,n){"use strict";n(324);var r=n(328),a=n(0),l=n.n(a),s=n(316),i=n.n(s);t.a=e=>{let{html:t,title:n,showCopy:a=!0}=e;return l.a.createElement("div",{style:{padding:10}},l.a.createElement("div",{style:{textAlign:"left",fontWeight:"bolder"}},n?l.a.createElement("span",{style:{marginRight:10}},n):null,a?l.a.createElement(r.a.Paragraph,{copyable:{text:t},style:{display:"inline"}},"复制内容"):null),l.a.createElement("pre",null,l.a.createElement("code",{dangerouslySetInnerHTML:{__html:t},className:i.a.code})))}},316:function(e,t,n){e.exports={code:"code__FaLAiD27"}},317:function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=e=>{let{componentName:t}=e;return a.a.createElement("div",{style:{marginTop:"10px"}},a.a.createElement("h3",null,"使用方式"),a.a.createElement("p",null,"方式一：通过npm install （暂未实现这个）"),a.a.createElement("p",null,"方式二：直接复制下面的JS文件和样式文件"))}},325:function(e,t,n){var r={"./af":181,"./af.js":181,"./ar":182,"./ar-dz":183,"./ar-dz.js":183,"./ar-kw":184,"./ar-kw.js":184,"./ar-ly":185,"./ar-ly.js":185,"./ar-ma":186,"./ar-ma.js":186,"./ar-sa":187,"./ar-sa.js":187,"./ar-tn":188,"./ar-tn.js":188,"./ar.js":182,"./az":189,"./az.js":189,"./be":190,"./be.js":190,"./bg":191,"./bg.js":191,"./bm":192,"./bm.js":192,"./bn":193,"./bn.js":193,"./bo":194,"./bo.js":194,"./br":195,"./br.js":195,"./bs":196,"./bs.js":196,"./ca":197,"./ca.js":197,"./cs":198,"./cs.js":198,"./cv":199,"./cv.js":199,"./cy":200,"./cy.js":200,"./da":201,"./da.js":201,"./de":202,"./de-at":203,"./de-at.js":203,"./de-ch":204,"./de-ch.js":204,"./de.js":202,"./dv":205,"./dv.js":205,"./el":206,"./el.js":206,"./en-au":207,"./en-au.js":207,"./en-ca":208,"./en-ca.js":208,"./en-gb":209,"./en-gb.js":209,"./en-ie":210,"./en-ie.js":210,"./en-il":211,"./en-il.js":211,"./en-in":212,"./en-in.js":212,"./en-nz":213,"./en-nz.js":213,"./en-sg":214,"./en-sg.js":214,"./eo":215,"./eo.js":215,"./es":216,"./es-do":217,"./es-do.js":217,"./es-us":218,"./es-us.js":218,"./es.js":216,"./et":219,"./et.js":219,"./eu":220,"./eu.js":220,"./fa":221,"./fa.js":221,"./fi":222,"./fi.js":222,"./fil":223,"./fil.js":223,"./fo":224,"./fo.js":224,"./fr":225,"./fr-ca":226,"./fr-ca.js":226,"./fr-ch":227,"./fr-ch.js":227,"./fr.js":225,"./fy":228,"./fy.js":228,"./ga":229,"./ga.js":229,"./gd":230,"./gd.js":230,"./gl":231,"./gl.js":231,"./gom-deva":232,"./gom-deva.js":232,"./gom-latn":233,"./gom-latn.js":233,"./gu":234,"./gu.js":234,"./he":235,"./he.js":235,"./hi":236,"./hi.js":236,"./hr":237,"./hr.js":237,"./hu":238,"./hu.js":238,"./hy-am":239,"./hy-am.js":239,"./id":240,"./id.js":240,"./is":241,"./is.js":241,"./it":242,"./it-ch":243,"./it-ch.js":243,"./it.js":242,"./ja":244,"./ja.js":244,"./jv":245,"./jv.js":245,"./ka":246,"./ka.js":246,"./kk":247,"./kk.js":247,"./km":248,"./km.js":248,"./kn":249,"./kn.js":249,"./ko":250,"./ko.js":250,"./ku":251,"./ku.js":251,"./ky":252,"./ky.js":252,"./lb":253,"./lb.js":253,"./lo":254,"./lo.js":254,"./lt":255,"./lt.js":255,"./lv":256,"./lv.js":256,"./me":257,"./me.js":257,"./mi":258,"./mi.js":258,"./mk":259,"./mk.js":259,"./ml":260,"./ml.js":260,"./mn":261,"./mn.js":261,"./mr":262,"./mr.js":262,"./ms":263,"./ms-my":264,"./ms-my.js":264,"./ms.js":263,"./mt":265,"./mt.js":265,"./my":266,"./my.js":266,"./nb":267,"./nb.js":267,"./ne":268,"./ne.js":268,"./nl":269,"./nl-be":270,"./nl-be.js":270,"./nl.js":269,"./nn":271,"./nn.js":271,"./oc-lnc":272,"./oc-lnc.js":272,"./pa-in":273,"./pa-in.js":273,"./pl":274,"./pl.js":274,"./pt":275,"./pt-br":276,"./pt-br.js":276,"./pt.js":275,"./ro":277,"./ro.js":277,"./ru":278,"./ru.js":278,"./sd":279,"./sd.js":279,"./se":280,"./se.js":280,"./si":281,"./si.js":281,"./sk":282,"./sk.js":282,"./sl":283,"./sl.js":283,"./sq":284,"./sq.js":284,"./sr":285,"./sr-cyrl":286,"./sr-cyrl.js":286,"./sr.js":285,"./ss":287,"./ss.js":287,"./sv":288,"./sv.js":288,"./sw":289,"./sw.js":289,"./ta":290,"./ta.js":290,"./te":291,"./te.js":291,"./tet":292,"./tet.js":292,"./tg":293,"./tg.js":293,"./th":294,"./th.js":294,"./tk":295,"./tk.js":295,"./tl-ph":296,"./tl-ph.js":296,"./tlh":297,"./tlh.js":297,"./tr":298,"./tr.js":298,"./tzl":299,"./tzl.js":299,"./tzm":300,"./tzm-latn":301,"./tzm-latn.js":301,"./tzm.js":300,"./ug-cn":302,"./ug-cn.js":302,"./uk":303,"./uk.js":303,"./ur":304,"./ur.js":304,"./uz":305,"./uz-latn":306,"./uz-latn.js":306,"./uz.js":305,"./vi":307,"./vi.js":307,"./x-pseudo":308,"./x-pseudo.js":308,"./yo":309,"./yo.js":309,"./zh-cn":310,"./zh-cn.js":310,"./zh-hk":311,"./zh-hk.js":311,"./zh-mo":312,"./zh-mo.js":312,"./zh-tw":313,"./zh-tw.js":313};function a(e){var t=l(e);return n(t)}function l(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=l,e.exports=a,a.id=325},582:function(e,t){e.exports="<h2 id=组件的props>组件的props</h2> <table> <thead> <tr> <th>参数</th> <th>说明</th> <th>类型</th> <th>默认值</th> </tr> </thead> <tbody><tr> <td>value</td> <td>当前数据的值</td> <td>array</td> <td>string</td> </tr> <tr> <td>list</td> <td>selector选择器使用的list</td> <td>array</td> <td></td> </tr> <tr> <td>multiple</td> <td>是否多选</td> <td>boolean</td> <td>false</td> </tr> <tr> <td>showSearch</td> <td>是否支持关键字搜索</td> <td>boolean</td> <td>true</td> </tr> <tr> <td>placeholder</td> <td>placeholder</td> <td>staring</td> <td>“”</td> </tr> <tr> <td>allowClear</td> <td>选择框是否展示清空按钮</td> <td>boolean</td> <td>true</td> </tr> <tr> <td>selectorProps</td> <td>select选择器组件的props用于覆盖此组件给出的默认值</td> <td>object</td> <td>{}</td> </tr> <tr> <td>save</td> <td>保存选择器变更的函数,必须返回Promise,Promise reslove修改成功，否则失败</td> <td>function:Promise</td> <td>{}</td> </tr> <tr> <td>allowNull</td> <td>是否允许为空</td> <td>boolean</td> <td>true</td> </tr> <tr> <td>disabled</td> <td>是否禁止编辑</td> <td>boolean</td> <td>false</td> </tr> </tbody></table> "},583:function(e,t){e.exports="<h2 id=canselectordescription-介绍>CanSelectorDescription 介绍</h2> <h3 id=作用>作用</h3> <ul> <li>在使用 antd Descriptions展示数组类的数据的时候，使得展示的数据可以通过多选框的形式更改</li> </ul> <h3 id=目的>目的</h3> <ul> <li>逻辑复用</li> </ul> <h2 id=组件预览>组件预览</h2> "},590:function(e,t,n){e.exports={inlineFormItem:"inlineFormItem__A5OY8mLn",inline:"inline__1a8ibiZv","btn-group":"btn-group__ZbCeqy7m"}},609:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(315),s=n(582),i=n.n(s),o=n(583),c=n.n(o),d=(n(584),n(607)),u=(n(336),n(337),n(342),n(341)),m=(n(332),n(334)),j=(n(318),n(314)),p=(n(586),n(590)),b=n.n(p);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g=e=>{const[t,n]=Object(r.useState)(!1);return[t,function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return new Promise((t,a)=>{n(!0),e(...r).then(t).catch(a).finally(()=>{n(!1)})})}]},k=e=>Array.isArray(e)?e.map(e=>"".concat(e)):e?"".concat(e):void 0,E=a.a.memo(e=>{let{value:t,list:n,activeEditState:r,disabled:l}=e;const s=n.reduce((e,t)=>v(v({},e),{},{["".concat(t.key)]:t.label}),{});let i="";return Array.isArray(t)&&t.length?i=t.map(e=>s[e]||e).join("，"):t&&(i=s[t]||t),l?a.a.createElement("span",null,i):a.a.createElement("span",null,a.a.createElement("span",null,i),a.a.createElement("span",{className:b.a.btnGroup},a.a.createElement(j.a,{size:"small",onClick:r},"编辑")))});var w=a.a.memo((function(){let{list:e,value:t,showSearch:n=!0,multiple:l=!1,placeholder:s,allowClear:i=!0,selectorProps:o={},save:c,allowNull:d=!0,disabled:p=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[f,v]=a.a.useState(k(t)),[y,w]=a.a.useState(!1),[S,O]=g(c),_=a.a.useRef();Object(r.useEffect)(()=>{v(k(t))},[t]);const x=Object(r.useCallback)(()=>{O(f).then(()=>{m.a.success("修改成功"),w(!1)}).catch(e=>{m.a.error("修改失败"),console.error(e)})},[f]),C=Object(r.useCallback)(()=>{w(!1),v(_.current)},[y]),z=Object(r.useCallback)(()=>{w(!0),_.current=f},[y,f]);return y?a.a.createElement("div",null,a.a.createElement(u.a,h({showSearch:n,mode:l?"multiple":"default",placeholder:s,style:{minWidth:300,maxWidth:"calc(100vw - 430px)"},allowClear:i,filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},o,{value:f,onChange:v}),e.map(e=>{let{key:t,label:n}=e;return a.a.createElement(u.a.Option,{value:t,key:t},n)})),a.a.createElement("span",{className:b.a.btnGroup},a.a.createElement(j.a,{size:"small",type:"primary",onClick:x,loading:S,disabled:!(d||f&&Array.isArray(f)&&f.length)},"保存"),a.a.createElement(j.a,{size:"small",onClick:C,disabled:S},"取消"))):a.a.createElement(E,{value:f,list:e,activeEditState:z,disabled:p})})),S=()=>a.a.createElement(d.a,{title:"示例Description",bordered:!0},a.a.createElement(d.a.Item,{label:"XXXX"},a.a.createElement(w,{allowNull:!1,list:[{key:"key1",label:"label1"},{key:"key2",label:"label2"}],value:"key1",disabled:!1,multiple:!0,save:e=>Promise.resolve(e)}))),O=n(317),_=n(179);t.default=()=>a.a.createElement(a.a.Fragment,null,a.a.createElement(_.a,{content:c.a}),a.a.createElement(S,null),a.a.createElement("br",null),a.a.createElement(l.a,{html:"import React from 'react';\r\nimport { Descriptions } from 'antd';\r\nimport CanSelectDescription from '../index';\r\n\r\nexport default () => (\r\n  &lt;Descriptions title=\"示例Description\" bordered>\r\n    &lt;Descriptions.Item label=\"XXXX\">\r\n      &lt;CanSelectDescription\r\n        allowNull={false}\r\n        list={[{ key: 'key1', label: 'label1' }, { key: 'key2', label: 'label2' }]}\r\n        value=\"key1\"\r\n        disabled={false}\r\n        multiple\r\n        save={(selectIds) => Promise.resolve(selectIds)}\r\n      />\r\n    &lt;/Descriptions.Item>\r\n  &lt;/Descriptions>\r\n);\r\n",title:"示例源码"}),a.a.createElement(_.a,{content:i.a}),a.a.createElement(O.a,null),a.a.createElement(l.a,{html:"import React, { useCallback, useEffect, useState } from 'react';\r\nimport {\r\n  Button, Select, message,\r\n} from 'antd';\r\nimport style from './style/index.less';\r\n\r\nconst useLoadingPromise = (fn) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const _fn = (...arg) => new Promise((resolve, reject) => {\r\n    setLoading(true);\r\n    fn(...arg).then(resolve).catch(reject).finally(() => {\r\n      setLoading(false);\r\n    });\r\n  });\r\n  return [loading, _fn];\r\n};\r\n\r\nconst getValue = (value) => {\r\n  if (Array.isArray(value)) {\r\n    return value.map((x) => `${x}`);\r\n  }\r\n  if (value) {\r\n    return `${value}`;\r\n  }\r\n  return undefined;\r\n};\r\n\r\nconst ShowSelectedData = React.memo(({\r\n  value, list, activeEditState, disabled,\r\n}) => {\r\n  const idName = list.reduce((pre, cur) => ({ ...pre, [`${cur.key}`]: cur.label }), {});\r\n  let text = '';\r\n  if (Array.isArray(value) && value.length) {\r\n    text = value.map((_id) => (idName[_id] || _id)).join('，');\r\n  } else if (value) {\r\n    text = idName[value] || value;\r\n  }\r\n\r\n  if (disabled) {\r\n    return &lt;span>{text}&lt;/span>;\r\n  }\r\n\r\n  return (\r\n    &lt;span>\r\n      &lt;span>{text}&lt;/span>\r\n      &lt;span className={style.btnGroup}>\r\n        &lt;Button size=\"small\" onClick={activeEditState}>编辑&lt;/Button>\r\n      &lt;/span>\r\n    &lt;/span>\r\n  );\r\n});\r\n\r\nexport default React.memo(({\r\n  list, value, showSearch = true, multiple = false, placeholder,\r\n  allowClear = true, selectorProps = {}, save, allowNull = true, disabled = false,\r\n} = {}) => {\r\n  const [_value, setValue] = React.useState(getValue(value));\r\n  const [editState, setEditState] = React.useState(false);\r\n  const [loading, _save] = useLoadingPromise(save);\r\n  const preValue = React.useRef();\r\n\r\n  useEffect(() => {\r\n    setValue(getValue(value));\r\n  }, [value]);\r\n\r\n  const saveData = useCallback(() => {\r\n    _save(_value).then(() => {\r\n      message.success('修改成功');\r\n      setEditState(false);\r\n    }).catch((e) => {\r\n      message.error('修改失败');\r\n      // eslint-disable-next-line no-console\r\n      console.error(e);\r\n    });\r\n  }, [_value]);\r\n\r\n  const cancelEditState = useCallback(() => {\r\n    setEditState(false);\r\n    setValue(preValue.current);\r\n  }, [editState]);\r\n\r\n  const activeEditState = useCallback(() => {\r\n    setEditState(true);\r\n    preValue.current = _value;\r\n  }, [editState, _value]);\r\n\r\n  if (!editState) {\r\n    return (&lt;ShowSelectedData\r\n      value={_value}\r\n      list={list}\r\n      activeEditState={activeEditState}\r\n      disabled={disabled}\r\n    />);\r\n  }\r\n\r\n  return (\r\n    &lt;div>\r\n      &lt;Select\r\n        showSearch={showSearch}\r\n        mode={(multiple) ? 'multiple' : 'default'}\r\n        placeholder={placeholder}\r\n        style={{ minWidth: 300, maxWidth: 'calc(100vw - 430px)' }}\r\n        allowClear={allowClear}\r\n        filterOption={(input, option) => (\r\n          option.props.children.toLowerCase()\r\n            .indexOf(input.toLowerCase()) >= 0\r\n        )}\r\n        {...selectorProps}\r\n        value={_value}\r\n        onChange={setValue}\r\n      >\r\n        {list.map(({ key, label: _label }) => (\r\n          &lt;Select.Option value={key} key={key}>{_label}&lt;/Select.Option>\r\n        ))}\r\n      &lt;/Select>\r\n      &lt;span className={style.btnGroup}>\r\n        &lt;Button\r\n          size=\"small\"\r\n          type=\"primary\"\r\n          onClick={saveData}\r\n          loading={loading}\r\n          disabled={!allowNull && (!_value || !(Array.isArray(_value) && _value.length))}\r\n        >保存&lt;/Button>\r\n        &lt;Button size=\"small\" onClick={cancelEditState} disabled={loading}>取消&lt;/Button>\r\n      &lt;/span>\r\n    &lt;/div>\r\n  );\r\n});\r\n",title:"js文件"}),a.a.createElement(l.a,{html:".inlineFormItem {\r\n  > div {\r\n    display: inline-block;\r\n\r\n    &:not(:first-child) {\r\n      margin-left: 10px;\r\n    }\r\n  }\r\n}\r\n\r\n.inline {\r\n  > div:last-child {\r\n    display: inline-block;\r\n    vertical-align: top;\r\n  }\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.btn-group {\r\n  text-align: center;\r\n\r\n  > button {\r\n    margin: 0 10px;\r\n  }\r\n}\r\n",title:"less文件"}))}}]);