(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{179:function(e,n,s){"use strict";var r=s(0),t=s.n(r),o=s(180),l=s.n(o);n.a=e=>{let{content:n}=e;return t.a.createElement("div",{style:{padding:10},className:l.a.mdcontainer},t.a.createElement("code",{dangerouslySetInnerHTML:{__html:n},className:l.a.code}))}},180:function(e,n,s){e.exports={mdcontainer:"mdcontainer__3ycSEfvL"}},315:function(e,n,s){"use strict";s(324);var r=s(328),t=s(0),o=s.n(t),l=s(316),a=s.n(l);n.a=e=>{let{html:n,title:s,showCopy:t=!0}=e;return o.a.createElement("div",{style:{padding:10}},o.a.createElement("div",{style:{textAlign:"left",fontWeight:"bolder"}},s?o.a.createElement("span",{style:{marginRight:10}},s):null,t?o.a.createElement(r.a.Paragraph,{copyable:{text:n},style:{display:"inline"}},"复制内容"):null),o.a.createElement("pre",null,o.a.createElement("code",{dangerouslySetInnerHTML:{__html:n},className:a.a.code})))}},316:function(e,n,s){e.exports={code:"code__FaLAiD27"}},325:function(e,n,s){var r={"./af":181,"./af.js":181,"./ar":182,"./ar-dz":183,"./ar-dz.js":183,"./ar-kw":184,"./ar-kw.js":184,"./ar-ly":185,"./ar-ly.js":185,"./ar-ma":186,"./ar-ma.js":186,"./ar-sa":187,"./ar-sa.js":187,"./ar-tn":188,"./ar-tn.js":188,"./ar.js":182,"./az":189,"./az.js":189,"./be":190,"./be.js":190,"./bg":191,"./bg.js":191,"./bm":192,"./bm.js":192,"./bn":193,"./bn.js":193,"./bo":194,"./bo.js":194,"./br":195,"./br.js":195,"./bs":196,"./bs.js":196,"./ca":197,"./ca.js":197,"./cs":198,"./cs.js":198,"./cv":199,"./cv.js":199,"./cy":200,"./cy.js":200,"./da":201,"./da.js":201,"./de":202,"./de-at":203,"./de-at.js":203,"./de-ch":204,"./de-ch.js":204,"./de.js":202,"./dv":205,"./dv.js":205,"./el":206,"./el.js":206,"./en-au":207,"./en-au.js":207,"./en-ca":208,"./en-ca.js":208,"./en-gb":209,"./en-gb.js":209,"./en-ie":210,"./en-ie.js":210,"./en-il":211,"./en-il.js":211,"./en-in":212,"./en-in.js":212,"./en-nz":213,"./en-nz.js":213,"./en-sg":214,"./en-sg.js":214,"./eo":215,"./eo.js":215,"./es":216,"./es-do":217,"./es-do.js":217,"./es-us":218,"./es-us.js":218,"./es.js":216,"./et":219,"./et.js":219,"./eu":220,"./eu.js":220,"./fa":221,"./fa.js":221,"./fi":222,"./fi.js":222,"./fil":223,"./fil.js":223,"./fo":224,"./fo.js":224,"./fr":225,"./fr-ca":226,"./fr-ca.js":226,"./fr-ch":227,"./fr-ch.js":227,"./fr.js":225,"./fy":228,"./fy.js":228,"./ga":229,"./ga.js":229,"./gd":230,"./gd.js":230,"./gl":231,"./gl.js":231,"./gom-deva":232,"./gom-deva.js":232,"./gom-latn":233,"./gom-latn.js":233,"./gu":234,"./gu.js":234,"./he":235,"./he.js":235,"./hi":236,"./hi.js":236,"./hr":237,"./hr.js":237,"./hu":238,"./hu.js":238,"./hy-am":239,"./hy-am.js":239,"./id":240,"./id.js":240,"./is":241,"./is.js":241,"./it":242,"./it-ch":243,"./it-ch.js":243,"./it.js":242,"./ja":244,"./ja.js":244,"./jv":245,"./jv.js":245,"./ka":246,"./ka.js":246,"./kk":247,"./kk.js":247,"./km":248,"./km.js":248,"./kn":249,"./kn.js":249,"./ko":250,"./ko.js":250,"./ku":251,"./ku.js":251,"./ky":252,"./ky.js":252,"./lb":253,"./lb.js":253,"./lo":254,"./lo.js":254,"./lt":255,"./lt.js":255,"./lv":256,"./lv.js":256,"./me":257,"./me.js":257,"./mi":258,"./mi.js":258,"./mk":259,"./mk.js":259,"./ml":260,"./ml.js":260,"./mn":261,"./mn.js":261,"./mr":262,"./mr.js":262,"./ms":263,"./ms-my":264,"./ms-my.js":264,"./ms.js":263,"./mt":265,"./mt.js":265,"./my":266,"./my.js":266,"./nb":267,"./nb.js":267,"./ne":268,"./ne.js":268,"./nl":269,"./nl-be":270,"./nl-be.js":270,"./nl.js":269,"./nn":271,"./nn.js":271,"./oc-lnc":272,"./oc-lnc.js":272,"./pa-in":273,"./pa-in.js":273,"./pl":274,"./pl.js":274,"./pt":275,"./pt-br":276,"./pt-br.js":276,"./pt.js":275,"./ro":277,"./ro.js":277,"./ru":278,"./ru.js":278,"./sd":279,"./sd.js":279,"./se":280,"./se.js":280,"./si":281,"./si.js":281,"./sk":282,"./sk.js":282,"./sl":283,"./sl.js":283,"./sq":284,"./sq.js":284,"./sr":285,"./sr-cyrl":286,"./sr-cyrl.js":286,"./sr.js":285,"./ss":287,"./ss.js":287,"./sv":288,"./sv.js":288,"./sw":289,"./sw.js":289,"./ta":290,"./ta.js":290,"./te":291,"./te.js":291,"./tet":292,"./tet.js":292,"./tg":293,"./tg.js":293,"./th":294,"./th.js":294,"./tk":295,"./tk.js":295,"./tl-ph":296,"./tl-ph.js":296,"./tlh":297,"./tlh.js":297,"./tr":298,"./tr.js":298,"./tzl":299,"./tzl.js":299,"./tzm":300,"./tzm-latn":301,"./tzm-latn.js":301,"./tzm.js":300,"./ug-cn":302,"./ug-cn.js":302,"./uk":303,"./uk.js":303,"./ur":304,"./ur.js":304,"./uz":305,"./uz-latn":306,"./uz-latn.js":306,"./uz.js":305,"./vi":307,"./vi.js":307,"./x-pseudo":308,"./x-pseudo.js":308,"./yo":309,"./yo.js":309,"./zh-cn":310,"./zh-cn.js":310,"./zh-hk":311,"./zh-hk.js":311,"./zh-mo":312,"./zh-mo.js":312,"./zh-tw":313,"./zh-tw.js":313};function t(e){var n=o(e);return s(n)}function o(e){if(!s.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}t.keys=function(){return Object.keys(r)},t.resolve=o,e.exports=t,t.id=325},495:function(e,n){e.exports="<h2 id=modalconfirm介绍>ModalConfirm介绍</h2> <h4 id=应用场景？>应用场景？</h4> <ul> <li>此功能点主要用在某些危险操作有关的逻辑中的二次确认，</li> </ul> <h4 id=为什么会有这个>为什么会有这个</h4> <ul> <li>对于二次确认操作，一般只需要配置一下title和点击确定按钮的回调函数就可以了。</li> <li>点击确认时，确认按钮出于loading状态，且弹窗不关闭，当回调函数成功关闭弹框，显示个提示文案。操作失败时弹窗不关闭<h4 id=此组件作用>此组件作用</h4> </li> </ul> <ol> <li>将okType默认置为danger。</li> <li>默认当操作成功时基于文案显示。</li> <li>目的是减少每次不必要重复配置</li> </ol> <h2 id=modalconfirm函数参数介绍>modalConfirm函数参数介绍</h2> <ol> <li>第一个参数modalConfig<ul> <li>modalConfig在<code>antd</code>的基础上增加了<code>successMessage</code>,为<code>boolean</code><ul> <li>successMessage如果不为false，在此函数的第二个参数所返回的promise状态为为resolve()时，会展示文案。</li> </ul> </li> <li>modalConfig不可以设置<code>onOk</code>属性，如果需要设置onOk请直接使用antd所提供的组件</li> <li>modalConfig.okType的默认值设置成了<code>danger</code></li> <li>modalConfig类型支持<code>string</code>,当类型为String时，即为弹框的title </li> </ul> </li> <li>第二个参数opsPromise<ul> <li>第二个参数类型需要是<code>function</code>,执行参数，会返回一个promise，当所返回的Promise为resolve时，关闭弹窗，并根据第一个参数的<code>successMessage</code>属性决定是否展示，提示成功的文案。</li> </ul> </li> </ol> <h2 id=其他>其他</h2> <p>下面的这些是我的猜想的一些扩展方向，可以通过修改此函数的源代码实现</p> <ol> <li>当异步操作失败时，可以进行某些公共操作，比如上报失败日志。</li> <li>操作成功时除了提示文字外增加一些逻辑。</li> <li>修改我所设置的默认值</li> </ol> "},615:function(e,n,s){"use strict";s.r(n);var r=s(0),t=s.n(r),o=(s(318),s(314)),l=(s(332),s(334)),a=(s(367),s(376));s(336),s(337);function i(e,n){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),s.push.apply(s,r)}return s}function c(e){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?i(Object(s),!0).forEach((function(n){j(e,n,s[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))}))}return e}function j(e,n,s){return n in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e}var m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,s={};if("object"==typeof e)s=e;else{if("string"!=typeof e)throw Error("参数类型不正确");s={title:e}}a.a.confirm(c(c({onOk:()=>new Promise((s,r)=>{const t=n();if(t&&"function"==typeof t.then&&"function"==typeof t.catch)return t.then((function(){!1!==e.successMessage&&l.a.success("操作成功"),s(...arguments)})).catch(r);s()})},s),{},{okType:s.okType||"danger"}))};const d=()=>new Promise((e,n)=>{Math.random()>.5?setTimeout(()=>{e()},1e3):setTimeout(()=>{n()},1e3)});var u=()=>t.a.createElement(t.a.Fragment,null,t.a.createElement(o.a,{onClick:()=>{m("确定删除XXX",()=>d())},type:"danger"},"删除"),t.a.createElement(o.a,{onClick:()=>{m({title:"确定提交XXX",okType:"primary"},()=>d())},type:"primary",style:{margin:12}},"提交"),t.a.createElement(o.a,{onClick:()=>{a.a.confirm({title:"确定删除XXX",okType:"danger",onOk:()=>d().then(()=>(l.a.success("操作成功"),Promise.resolve()))})}},"删除(直接antd实现)")),f=s(315),g=s(179),p=s(495),h=s.n(p);n.default=()=>t.a.createElement(t.a.Fragment,null,t.a.createElement(g.a,{content:h.a}),t.a.createElement("h2",null,"组件预览"),t.a.createElement(u,null),t.a.createElement(f.a,{html:"import React from 'react';\r\nimport { Button, message, Modal } from 'antd';\r\nimport ModalConfirm from '../index';\r\n\r\nconst sendMessage = () => new Promise((resolve, reject) => {\r\n  if (Math.random() > 0.5) {\r\n    setTimeout(() => {\r\n      resolve();\r\n    }, 1000);\r\n  } else {\r\n    setTimeout(() => {\r\n      reject();\r\n    }, 1000);\r\n  }\r\n});\r\n\r\nexport default () => {\r\n  const onClick = () => {\r\n    const arg = 'Promise Resolve arguments';\r\n    // 同样逻辑只需要一行\r\n    ModalConfirm('确定删除XXX', () => sendMessage(arg));\r\n  };\r\n\r\n  const onClickPrimary = () => {\r\n    // 修改确认按钮为primary\r\n    const arg = 'Promise Resolve arguments';\r\n    ModalConfirm({\r\n      title: '确定提交XXX',\r\n      okType: 'primary',\r\n    }, () => sendMessage(arg));\r\n  };\r\n\r\n  const onClickAntd = () => {\r\n    const arg = 'Promise Resolve arguments';\r\n    // 同样逻辑需要七行\r\n    Modal.confirm({\r\n      title: '确定删除XXX',\r\n      okType: 'danger',\r\n      onOk: () => sendMessage(arg).then(() => {\r\n        message.success('操作成功');\r\n        return Promise.resolve();\r\n      }),\r\n    });\r\n  };\r\n\r\n  return (\r\n    &lt;>\r\n      &lt;Button onClick={onClick} type=\"danger\">删除&lt;/Button>\r\n      &lt;Button onClick={onClickPrimary} type=\"primary\" style={{ margin: 12 }}>提交&lt;/Button>\r\n      &lt;Button onClick={onClickAntd}>删除(直接antd实现)&lt;/Button>\r\n    &lt;/>\r\n  );\r\n};\r\n",title:"示例源码",showCopy:!1}),t.a.createElement("h2",null,"开始使用"),t.a.createElement(f.a,{html:"import { message, Modal } from 'antd';\r\n\r\nexport default (modalConfig = '', promise) => {\r\n  let _modalConfig = {};\r\n  if (typeof modalConfig === 'object') {\r\n    _modalConfig = modalConfig;\r\n  } else if (typeof modalConfig === 'string') {\r\n    _modalConfig = {\r\n      title: modalConfig,\r\n    };\r\n  } else {\r\n    throw Error('参数类型不正确');\r\n  }\r\n\r\n  Modal.confirm({\r\n    // eslint-disable-next-line consistent-return\r\n    onOk: () => new Promise((resolve, reject) => {\r\n      const opRes = promise();\r\n      if (opRes && typeof opRes.then === 'function' && typeof opRes.catch === 'function') {\r\n        return opRes.then((..._arg) => {\r\n          if (modalConfig.successMessage !== false) {\r\n            message.success('操作成功');\r\n          }\r\n          resolve(..._arg);\r\n        }).catch(reject);\r\n      }\r\n      resolve();\r\n    }),\r\n    ..._modalConfig,\r\n    okType: _modalConfig.okType || 'danger',\r\n  });\r\n};\r\n",title:"JS源码"}))}}]);